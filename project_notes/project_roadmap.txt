CORE
+ Create a loan
+ View loans
+ Update loans
+ Delete loans
+ Kanban style, ability to drag and drop loans
+ clicking on a loan shows loan details, and activity log, tasks and file notes

ADVANCED
+ User Authentication 
    - Google 
    - Credentials 
+ Pagination (?)
+ Dashboard 
    - Graph displaying amount of loans in each stage
    - Fetch latest loans
        - Interacted with, or recently created
    - Summary card 
        - amount of loans in each stage
+ Color customization by user
+ AI chat WebSocket
+ Ability to create loan teams 
    - Designate users as loan officer or sales support














Ideas Space
- How will this be differentiated from HubSpot ? 
    Less feature overload/catered to loan officers/loan support team, but how? Think about it...

1.0 Features

1. Create a loan
    - Either
        A) Separate forms for purchase and refi
        B) Certain forms will be disabled depending on what type of transaction is selected.
2. View (Read) a loan
3. Update a loan on the view loan page.
4. Each loan will have an acitivies page showing all activities
5. Each loan, on creation, automatically goes into prospect stage.
6. On the dashboard, loans must be able to be moved to any stage that user wishes - activity log will update accordingly.
7. Each loan should have a task log that can be added to. An alert will flash on the view loan page if there is a task that has at least one task that's marked as highly important
9. Activities should automatically trigger the creation of a log in the activity log 
    1 - Creation of a loan.
    2 - Update of a loan.

Tasks
___
1.Tasks should have the ability to marked as highly important which will trigger an alert on the Activity page 


Backlog
___
Tasks
1. Add more functionality than just ability to mark task as complete, specifically ability to create a "log" for that specific task. Useful if task is something like "call client to discuss rate lock", but LO was not able to get ahold of client. Need to figure out subtasks.
2. Store completed tasks in history somewhere (in 1.0, tasks will just be deleted if they are marked as complete)

WebSocket
1. Add an AI Chatbot or Web Socket of some support

Login / Registration
1. IMPORTANT as this is supposed to be for TEAMS so it must be able to be logged in by multiple people. Loan Teams must be able to be created
    On register, user must select whether they are a Loan Officer or Sales Support. Important as only loan team members should be able to access specific loan team's loans.

Deployment

SEO consideration

____

Debugging

1. Bug: Tailwind class will not apply for pipeline stage color.

* You cannot apply tailwind classes with something like

    <Heading
        className={classNames(`!bg-${stage.color}`....)}
        size={"4"}
    >

string interpolation doesn't work for applying tailwind dynamically
You can try using the style object instead....


2. Bug: Changing default font did not work via radix UI docs or nextjs docs

* Fix - look at layout.tsx

    import "./theme-config.css";
    import { Inter } from 'next/font/google';
    import "./globals.css";

    ...
    <body className={inter.variable}>
    ...

    - create a theme-config.css file in /app

    ".radix-themes {
    --default-font-family: var(--font-inter) !important
    }"

3. Bug: Could not submit form when building it with react-hook-form

* Fix - You cannot directly nest <Select> or <TextField> or any Radix Ui Theme component directly and give it {...register("borrowerName")} etc prop to track the input. you must use the <Controller> component and it's render prop in order for the input to properly be tracked. 

4. "Cannot read properties of undefined (reading 'trim')"

* Fix if you are using the .trim() method (which i am on the create and edit loan validation schema,) you must do `...: undefined` as you must account for undefined/since .trim() can't work on an empty value like undefined


5. loanAmount field seemingly was required even though i didnt use `required` - the real issue was that it was treating the input as empty or invalid(?) because there was a type mismatch between number/string

* Fix - react-hook-form TREATS EVERYTHING AS A STRING so if your input is of type number, you must cast the input into a number on submission

if using a normal input

<input
  type="number"
  {...register("test", {
    valueAsNumber: true,
  })}
/>

Using a standard function in this case because we are using <Controller> components

                            onChange={(e) => {
                              const value = e.target.value;
                              field.onChange(
                                value ? parseInt(value) : undefined
                              );
                            }}

Additionally, a custom function had to be applied to each and every field 


onChange={(e) => {
                              const value = e.target.value;
                              field.onChange(
                                value ? parseInt(value) : undefined
                              );

Otherwise, adding stuff to an input and then deleting it, then trying to submit the form will result in failure to submit the form

6. " pipelineStages.forEach(stage => {
            loansByStage[stage] = loans.filter(loan => loan.pipelineStage === stage)
        })
        

    error: 
    Element implicitly has an 'any' type because expression of type 'string' can't be used to index type '{}'.
  No index signature with a parameter of type 'string' was found on type '{}'.ts(7053)
        "

    Fix: type loansByStage like so:
    
     const loansByStage: {[key: string]: any} = {};

     why?

     The syntax you see here is called an index signature in TypeScript. It is used to define the types of properties that can be accessed using square bracket notation on an object.

In this specific code snippet, the index signature is added to the loansByStage object. The index signature is defined as [key: string]: any. Let's break it down:

[key: string] represents the index parameter. It specifies that any string can be used as the key to access properties of the object.
: any is the type annotation for the value associated with the key. In this case, it is set to any, which means that the value can be of any type.
So, by adding this index signature, you are essentially saying that the loansByStage object can have properties with any string key and any corresponding value type.

7. "Element implicitly has an 'any' type because index expression is not of type 'number'. "

on line "loans[data.value]" in pipeline/page.tsx

 Prisma does generate TypeScript types based on your database schema. However, the error you're seeing is not related to the shape of the Loan object, but rather the shape of the loans object (the object you get when you call the API to get all loans).

In your code, you're using data.value as an index to access a property of loans. TypeScript needs to know that loans is an object with string keys and Loan[] values.

Since loans is set with the data fetched from your API, you can type the state like this:

const [loans, setLoans] = useState<Record<string, Loan[]>>({});

This tells TypeScript that loans is an object with string keys and values that are arrays of Loan objects. Now, when you use data.value as an index to access a property of loans, TypeScript knows that it's a string and the error should be resolved.